#!/usr/bin/env bash
# Configures /etc/hosts so localhost resolves to 127.0.0.2 and facebook.com to 8.8.8.8

# Ensure the script is run as root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

HOSTS_FILE="/etc/hosts"

# Backup the hosts file if not already backed up
if [ ! -f /etc/hosts.bak ]; then
  cp "$HOSTS_FILE" /etc/hosts.bak
fi

# Remove existing entries
sed -i '/[[:space:]]localhost$/d' "$HOSTS_FILE"
sed -i '/[[:space:]]facebook.com$/d' "$HOSTS_FILE"

# Add new mappings
echo "127.0.0.2 localhost" >> "$HOSTS_FILE"
echo "8.8.8.8 facebook.com" >> "$HOSTS_FILE"
