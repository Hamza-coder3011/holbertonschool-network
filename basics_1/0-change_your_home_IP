#!/usr/bin/env bash

# This script must be run as root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root (use sudo)"
  exit 1
fi

HOSTS_FILE="/etc/hosts"

# Backup the original hosts file (only once)
if [ ! -f /etc/hosts.bak ]; then
  cp "$HOSTS_FILE" /etc/hosts.bak
fi

# Remove existing localhost and facebook.com entries
sed -i '/[[:space:]]localhost$/d' "$HOSTS_FILE"
sed -i '/[[:space:]]facebook.com$/d' "$HOSTS_FILE"

# Add required mappings
echo "127.0.0.2 localhost" >> "$HOSTS_FILE"
echo "8.8.8.8 facebook.com" >> "$HOSTS_FILE"

echo "Configuration updated:"
echo " - localhost → 127.0.0.2"
echo " - facebook.com → 8.8.8.8"
